Division Bugs Report
================================================================================

RSI CALCULATIONS
--------------------------------------------------------------------------------

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\utils\safe_indicators.py
  Line 23: rs = gain / loss  # BUG: loss can be zero!
  Line 24: rsi = 100 - (100 / (1 + rs))

GENERAL DIVISIONS
--------------------------------------------------------------------------------

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\system_resilience.py
  Line 331: buy_ratio = buy_signals / total_signals

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\agents\model_discovery_agent.py
  Line 989: metadata_path = models_dir / f"{discovery.model_id}_metadata.json"

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\core\history_logger.py
  Line 501: archive_path = archive_subdir / filepath.name

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\data\data_loader.py
  Line 583: progress=i / len(requests),

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\data\providers\alpha_vantage_provider.py
  Line 39: cache_path = CACHE_DIR / f"{symbol}.pkl"
  Line 64: cache_path = CACHE_DIR / f"{symbol}.pkl"

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\data\providers\yfinance_provider.py
  Line 94: cache_path = CACHE_DIR / f"{symbol}.pkl"
  Line 123: cache_path = CACHE_DIR / f"{symbol}.pkl"

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\ensemble\diagnostic_tools.py
  Line 216: type_diversity = unique_types / len(models)

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\evaluation\metrics.py
  Line 293: drawdowns = cumulative / running_max - 1

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\execution\execution_replay.py
  Line 474: html_file = output_path / f"replay_{session_id}.html"

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\forecasting\hybrid_model.py
  Line 178: win_rate = wins / total_trades if total_trades > 0 else 0.0
  Line 269: weight = metric_value / total_metric_value
  Line 538: normalized_trend = slope / max_change if max_change > 0 else 0.0
  Line 577: "description": "Sharpe ratio weighting (weight = Sharpe / total_Sharpe)",
  Line 708: weighted = weighted / total_weight

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\forecasting\postprocess.py
  Line 161: normalized_vol = volatility / forecast_range
  Line 386: smoothing_ratio = smoothed_std / original_std

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\memory\agent_memory_manager.py
  Line 1049: success_rate = recent_successes / len(recent_memory)
  Line 1141: success_rate = recent_successes / len(recent_memory)
  Line 1378: snapshot_file = snapshot_path / f"{snapshot_id}.json"

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\memory\logger_utils.py
  Line 165: strategy_log_file = log_path / f"{strategy_name}.log"

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\memory\long_term_performance_tracker.py
  Line 938: weighted_average = weighted_sum / total_weight

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\memory\model_monitor.py
  Line 1225: current_hist = current_hist / current_hist.sum()
  Line 1226: historical_hist = historical_hist / historical_hist.sum()

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\memory\performance_logger.py
  Line 628: filepath = export_dir / filename

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\memory\prompt_feedback_memory.py
  Line 240: success_rate = successful_count / total_count if total_count > 0 else 0

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\memory\strategy_logger.py
  Line 379: avg_confidence = total_confidence / valid_records
  Line 380: avg_win_rate = total_win_rate / valid_records
  Line 381: avg_sharpe_ratio = total_sharpe_ratio / valid_records
  Line 382: avg_total_return = total_return / valid_records
  Line 383: avg_max_drawdown = total_max_drawdown / valid_records

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\meta_learning\model_swapper.py
  Line 515: normalized_sharpe = sharpe_improvement / max(old_metrics.sharpe_ratio, 0.1)
  Line 516: normalized_mse = mse_improvement / max(old_metrics.mse, 0.001)

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\models\base_model.py
  Line 284: log_file = log_dir / f"{self.__class__.__name__}.log"

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\models\advanced\ensemble\ensemble_model.py
  Line 372: weights = weights / weights.sum()

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\nlp\sentiment_processor.py
  Line 373: engagement_rate = total_engagement / max(1, metrics.followers_count)
  Line 674: avg_score = total_score / matched_words

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\optimization\utils\consolidator.py
  Line 107: backup_subdir = backup_path / dir_name

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\recovery\disaster_recovery_manager.py
  Line 409: dest_path = models_backup_path / rel_path
  Line 442: dest_path = config_backup_path / rel_path
  Line 539: backup_path = temp_dir / backup_id

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\report\report_generator.py
  Line 251: win_rate = winning_trades / total_trades if total_trades > 0 else 0.0
  Line 344: accuracy = correct_predictions / len(predictions) if predictions else 0.0
  Line 358: recall = true_positives / actual_positives if actual_positives > 0 else 0.0

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\report\unified_trade_reporter.py
  Line 264: win_rate = winning_trades / total_trades if total_trades > 0 else 0.0
  Line 273: avg_win_loss_ratio = avg_gain / avg_loss if avg_loss > 0 else float("inf")
  Line 373: information_ratio = alpha / volatility if volatility > 0 else 0.0
  Line 491: trade_return = pnl / initial_cash if initial_cash > 0 else 0.0

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\strategies\ensemble_methods.py
  Line 500: avg_position_size = total_position_size / total_weight
  Line 501: avg_risk_score = total_risk_score / total_weight
  Line 592: avg_predicted_return = total_predicted_return / total_weight
  Line 593: avg_position_size = total_position_size / total_weight
  Line 594: avg_risk_score = total_risk_score / total_weight
  Line 659: avg_confidence = total_confidence / total_weight
  Line 660: avg_position_size = total_position_size / total_weight
  Line 661: avg_risk_score = total_risk_score / total_weight

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\tools\init_logs.py
  Line 80: file_path = log_path / filename

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\training\loop.py
  Line 166: loss = loss / self.config.gradient_accumulation_steps
  Line 212: samples_per_sec = batch_size / batch_time
  Line 222: avg_loss = total_loss / total_samples
  Line 223: avg_grad_norm = total_grad_norm / num_batches
  Line 224: samples_per_second = total_samples / epoch_time
  Line 276: val_loss = total_loss / total_samples

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\utils\error_logger.py
  Line 26: log_file = LOG_DIR / f"errors_{datetime.now().strftime('%Y%m%d')}.log"

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\utils\logging_utils.py
  Line 511: config_file = log_path / f"{name}_log_config.json"

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\utils\performance_metrics.py
  Line 261: win_rate = winning_trades / total_trades if total_trades > 0 else 0
  Line 262: loss_rate = losing_trades / total_trades if total_trades > 0 else 0

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\utils\reward_function.py
  Line 88: consistency = win_rate / max_drawdown if max_drawdown > 0 else 0.0

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\utils\safe_indicators.py
  Line 23: rs = gain / loss  # BUG: loss can be zero!

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\utils\signal_generation.py
  Line 102: completeness_score = non_zero_signals / total_signals if total_signals > 0 else 0.0

C:\Users\Thomas\OneDrive\Desktop\Dashboard\evolve_clean\trading\utils\metrics\scorer.py
  Line 359: weights = weights / np.sum(weights)

